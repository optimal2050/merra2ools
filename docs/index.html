<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>R-tools to process MERRA-2 data (NASA) with focus on renewable energy • merra2ools</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="favicon-96x96.png">
<link rel="icon" type="”image/svg+xml”" href="favicon.svg">
<link rel="apple-touch-icon" sizes="180x180" href="apple-touch-icon.png">
<link rel="icon" sizes="any" href="favicon.ico">
<link rel="manifest" href="site.webmanifest">
<script src="lightswitch.js"></script><script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="deps/headroom-0.11.0/headroom.min.js"></script><script src="deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="deps/search-1.0.0/fuse.min.js"></script><script src="deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="pkgdown.js"></script><meta property="og:title" content="R-tools to process MERRA-2 data (NASA) with focus on renewable energy">
<meta name="description" content="A toolbox for evaluation of hourly availability of solar and wind energy potential globally, based on MERRA-2 satellite reanalysis data subset (requires the data download from: https://doi.org/10.5061/dryad.v41ns1rtt).">
<meta property="og:description" content="A toolbox for evaluation of hourly availability of solar and wind energy potential globally, based on MERRA-2 satellite reanalysis data subset (requires the data download from: https://doi.org/10.5061/dryad.v41ns1rtt).">
<meta property="og:image" content="https://energyRt.github.io/merra2ools/logo.png">
<!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=G-00GHMPMM37"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-00GHMPMM37');
</script>
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top " aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="index.html">merra2ools</a>

    <small class="nav-text text-danger me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Unreleased version">0.1.05</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="articles/merra2ools.html">Get started</a></li>
<li class="nav-item"><a class="nav-link" href="reference/index.html">Reference</a></li>
<li class="nav-item"><a class="nav-link" href="articles/roadmap.html">{dev-status}</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="articles/merra2.html">MERRA2 subset</a></li>
    <li><a class="dropdown-item" href="articles/solarpower.html">Solar Power</a></li>
    <li><a class="dropdown-item" href="articles/windpower.html">Wind Power</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="news/index.html">News</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/optimal2050/merra2ools/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-lightswitch" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true" aria-label="Light switch"><span class="fa fa-sun"></span></button>
  <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="dropdown-lightswitch">
<li><button class="dropdown-item" data-bs-theme-value="light"><span class="fa fa-sun"></span> Light</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="dark"><span class="fa fa-moon"></span> Dark</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="auto"><span class="fa fa-adjust"></span> Auto</button></li>
  </ul>
</li>
      </ul>
</div>


  </div>
</nav><div class="container template-home">
<div class="row">
  <main id="main" class="col-md-9"><div class="section level1">
<div class="page-header">
<img src="logo.png" class="logo" alt=""><h1 id="merra2ools-">merra2ools 
<a class="anchor" aria-label="anchor" href="#merra2ools-"></a>
</h1>
</div>
<!-- badges: start -->

<p><strong>merra2ools</strong> is an R package and dataset for evaluating the potential output of variable energy resources (VER) — specifically wind and solar — globally, using over 40 years of hourly MERRA-2 reanalysis data. The dataset was assembled, and the package initially developed, to support the authors’ internal and collaborative energy modeling studies, and is made available for public use. Further development will be guided by the needs of related research projects and contributions from the broader community. See <a href="https://optimal2050.github.io/merra2ools/articles/roadmap.html" class="external-link">Roadmap</a> for details.</p>
<div class="section level2">
<h2 id="purpose">Purpose<a class="anchor" aria-label="anchor" href="#purpose"></a>
</h2>
<p>The primary goal of merra2ools is to provide energy modelers and analysts with: - A curated, long-term subset of MERRA-2 data relevant to energy modeling.<br>
- A toolkit for estimating hourly potential output and capacity factors of wind and solar energy.<br>
- Basic support for hydro power output potential using precipitation and surface runoff indicators.</p>
</div>
<div class="section level2">
<h2 id="features">Features<a class="anchor" aria-label="anchor" href="#features"></a>
</h2>
<ul>
<li>Access to a global, multi-decade MERRA-2 dataset compressed for efficient use.<br>
</li>
<li>Scaled and rounded time series data stored as compressed integers to reduce storage while preserving relevant signal.</li>
<li>Functions to estimate capacity factors and potential output across regions and time.</li>
</ul>
</div>
<div class="section level2">
<h2 id="data--compression">Data &amp; Compression<a class="anchor" aria-label="anchor" href="#data--compression"></a>
</h2>
<p>The <code>merra2ools</code> dataset includes a <strong>41-year (1980–2020)</strong> hourly time series of selected indicators from the NASA MERRA-2 reanalysis dataset. The data is preprocessed, scaled, and compressed to reduce file size while preserving sufficient accuracy for renewable energy modeling. The data is downloadable from <a href="https://doi.org/10.5061/dryad.v41ns1rtt" class="external-link">Dryad</a> cloud repository. A sample data can be installed from the <code>merra2sample</code> package.</p>
<div class="section level3">
<h3 id="index-columns">Index columns<a class="anchor" aria-label="anchor" href="#index-columns"></a>
</h3>
<p>Each record is indexed by:</p>
<ul>
<li>
<strong><code>UTC</code></strong> — Hourly timestamp in Coordinated Universal Time (UTC)<br>
</li>
<li>
<strong><code>locid</code></strong> — Location ID (integer from 1 to 207,936, corresponding to MERRA-2 grid cells)</li>
</ul>
</div>
<div class="section level3">
<h3 id="variables">Variables<a class="anchor" aria-label="anchor" href="#variables"></a>
</h3>
<table class="table">
<colgroup>
<col width="50%">
<col width="50%">
</colgroup>
<thead><tr>
<th>Variable</th>
<th>Description</th>
</tr></thead>
<tbody>
<tr>
<td><code>W10M</code></td>
<td>Wind speed at 10 m, computed as <code>sqrt(U10M² + V10M²)</code>, rounded to 0.1 m/s</td>
</tr>
<tr>
<td><code>W50M</code></td>
<td>Wind speed at 50 m, computed similarly, rounded to 0.1 m/s</td>
</tr>
<tr>
<td><code>WDIR</code></td>
<td>Wind direction at 50 m, <code>atan2(V50M, U50M)</code>, rounded to nearest 10°</td>
</tr>
<tr>
<td><code>T10M</code></td>
<td>Air temperature at 10 m (°C), rounded to nearest integer</td>
</tr>
<tr>
<td><code>SWGDN</code></td>
<td>Surface shortwave radiation (W/m²), rounded to nearest integer</td>
</tr>
<tr>
<td><code>ALBEDO</code></td>
<td>Surface albedo [0–1], rounded to 0.01</td>
</tr>
<tr>
<td><code>PRECTOTCORR</code></td>
<td>Total precipitation (kg/m²/h), bias-corrected, rounded to 0.1</td>
</tr>
<tr>
<td><code>RHOA</code></td>
<td>Surface air density (kg/m³), rounded to 0.01</td>
</tr>
</tbody>
</table>
</div>
<div class="section level3">
<h3 id="compression">Compression<a class="anchor" aria-label="anchor" href="#compression"></a>
</h3>
<ul>
<li>All values are stored as <strong>scaled integers</strong> to reduce size while maintaining numerical usability.</li>
<li>Files are compressed using a high-efficiency format (e.g., <code>fst</code> with potential conversion to <code>parquet</code>, or custom binary) to keep the total dataset under 300 GB.</li>
<li>Partial data loading is supported, allowing users to work with only the necessary time periods or variables.</li>
</ul>
</div>
</div>
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># install.packages("pak") # if not installed</span></span>
<span><span class="fu">pak</span><span class="fu">::</span><span class="fu"><a href="https://pak.r-lib.org/reference/pkg_install.html" class="external-link">pkg_install</a></span><span class="op">(</span><span class="st">"optimal2050/merra2ools"</span><span class="op">)</span> <span class="co"># install the package</span></span>
<span><span class="fu">pak</span><span class="fu">::</span><span class="fu"><a href="https://pak.r-lib.org/reference/pkg_install.html" class="external-link">pkg_install</a></span><span class="op">(</span><span class="st">"optimal2050/merra2sample"</span><span class="op">)</span> <span class="co"># optional - example dataset</span></span></code></pre></div>
<p>Download datasets from <a href="https://doi.org/10.5061/dryad.v41ns1rtt" class="external-link uri">https://doi.org/10.5061/dryad.v41ns1rtt</a> to a local folder. It is not required to download all the data, but it is suggested to download at least for one full year (12 months).</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://optimal2050.github.io/merra2ools/" class="external-link">merra2ools</a></span><span class="op">)</span></span>
<span><span class="co"># link the package with the downloaded data</span></span>
<span><span class="fu"><a href="reference/merra2.html">set_merra2_options</a></span><span class="op">(</span>merra2.dir <span class="op">=</span> <span class="st">"PATH TO THE DOWNLOADED DATA"</span><span class="op">)</span></span>
<span><span class="fu"><a href="reference/merra2.html">get_merra2_dir</a></span><span class="op">(</span><span class="op">)</span>  <span class="co"># check if the path is saved</span></span>
<span><span class="fu"><a href="reference/merra2.html">check_merra2</a></span><span class="op">(</span>detailed <span class="op">=</span> <span class="cn">T</span><span class="op">)</span></span></code></pre></div>
<p>See <a href="https://optimal2050.github.io/merra2ools/articles/merra2ools.html" class="external-link">Get started</a> article (or call <code><a href="articles/merra2ools.html">vignette("merra2ools", package = "merra2ools")</a></code>) for details.</p>
</div>
<div class="section level2">
<h2 id="example-data">Example data<a class="anchor" aria-label="anchor" href="#example-data"></a>
</h2>
<p>The package reproduces basic algorithms of solar geometry, irradiance decomposition, and the Plane-Of-Array models for different types of solar PV trackers.<br>
See <a href="https://optimal2050.github.io/merra2ools/articles/solarpower.html" class="external-link">Solar Power</a> article (or call<code><a href="articles/solarpower.html">vignette("solarpower", package = "merra2ools")</a></code>) for details.</p>
<p><img src="reference/figures/ghi_40y_avr_24steps.png" width="2550"></p>
<p>The package includes basic algorithms for estimating wind power potential and capacity factors. It uses the MERRA-2 wind speed at 10 and 50 meters above ground level (AGL) to extrapolate wind speed at higher altitudes and estimates the wind power potential based on given wind power curves.<br>
See <a href="https://optimal2050.github.io/merra2ools/articles/windpower.html" class="external-link">Wind Power</a> article (or call <code><a href="articles/windpower.html">vignette("windpower", package = "merra2ools")</a></code>) for details.</p>
<p><img src="reference/figures/wind_50m_40y_avr_24steps.png" width="3150"></p>
<p>See the <a href="https://optimal2050.github.io/merra2ools/articles/merra2.html" class="external-link">MERRA-2 subset</a> article (or call <code><a href="articles/merra2.html">vignette("merra2", package = "merra2ools")</a></code>) for a complete list of included time series and a detailed description of the dataset.</p>
</div>
<div class="section level2">
<h2 id="contributing">Contributing<a class="anchor" aria-label="anchor" href="#contributing"></a>
</h2>
<p>We welcome contributions to the merra2ools package! Please see our <a href="https://optimal2050.github.io/merra2ools/CONTRIBUTING.html" class="external-link">Contributing Guidelines</a> for details on how to get involved. Or simply open an issue, pull request, or feature request on GitHub.</p>
</div>
<div class="section level2">
<h2 id="license">License<a class="anchor" aria-label="anchor" href="#license"></a>
</h2>
<p>This package is licensed under the <a href="https://www.gnu.org/licenses/agpl-3.0.en.html" class="external-link">GNU Affero General Public License v3.0</a>. The data is available under the <a href="https://creativecommons.org/publicdomain/zero/1.0/" class="external-link">CC0 1.0 Universal (CC0 1.0) Public Domain Dedication</a>.</p>
</div>
<div class="section level2">
<h2 id="citing-merra2ools">Citing merra2ools<a class="anchor" aria-label="anchor" href="#citing-merra2ools"></a>
</h2>
<ul>
<li><p>Lugovoy, O., &amp; Gao, S. (2023). <em>merra2ools: Satellite data and tools for retrospective assessment of renewable energy production</em> (R package version 0.1.05). Available at: <a href="https://optimal2050.github.io/merra2ools/" class="external-link uri">https://optimal2050.github.io/merra2ools/</a></p></li>
<li><p>The solar PV performance estimation module in <code>merra2ools</code> reproduces core elements of the modeling approach described by the <a href="https://pvpmc.sandia.gov/modeling-guide/1-weather-design-inputs/" class="external-link">Solar PV Performance Modeling Collaborative (PVPMC)</a>.</p></li>
</ul>
</div>
<div class="section level2">
<h2 id="citing-merra-2-data">Citing MERRA-2 Data<a class="anchor" aria-label="anchor" href="#citing-merra-2-data"></a>
</h2>
<ul>
<li><p>Gelaro, R., et al. (2017). <em>The Modern-Era Retrospective Analysis for Research and Applications, Version 2 (MERRA-2)</em>. <em>Journal of Climate</em>, <strong>30</strong>(14), 5419–5454. <a href="https://doi.org/10.1175/JCLI-D-16-0758.1" class="external-link uri">https://doi.org/10.1175/JCLI-D-16-0758.1</a></p></li>
<li><p>Bosilovich, M. G., Lucchesi, R., &amp; Suarez, M. (2016). <em>MERRA-2: File Specification</em>. GMAO Office Note No. 9 (Version 1.1), 73 pp. Available at: <a href="http://gmao.gsfc.nasa.gov/pubs/office_notes" class="external-link uri">http://gmao.gsfc.nasa.gov/pubs/office_notes</a></p></li>
<li><p>NASA Global Modeling and Assimilation Office (GMAO). <em>MERRA-2: The Modern-Era Retrospective analysis for Research and Applications, Version 2</em>. Available at: <a href="https://gmao.gsfc.nasa.gov/reanalysis/merra-2/" class="external-link uri">https://gmao.gsfc.nasa.gov/reanalysis/merra-2/</a></p></li>
<li><p>Global Modeling and Assimilation Office (GMAO) (2015), <em>MERRA-2 tavg1_2d_rad_Nx: 2d, 1-Hourly, Time-Averaged, Single-Level, Assimilation, Radiation Diagnostics, 0.625 x 0.5 degree, V5.12.4 (M2T1NXRAD)</em> at GES DISC. Accessed: 2019–2020. DOI: <a href="https://doi.org/10.5067/Q9QMY5PBNV1T" class="external-link">10.5067/Q9QMY5PBNV1T</a></p></li>
<li><p>Global Modeling and Assimilation Office (GMAO) (2015), <em>MERRA-2 tavg1_2d_slv_Nx: 2d, 1-Hourly, Time-Averaged, Single-Level, Assimilation, Single-Level Diagnostics, V5.12.4 (M2T1NXSLV)</em> at GES DISC. Accessed: 2019–2020. DOI: <a href="https://doi.org/10.5067/VJAFPLI1CSIV" class="external-link">10.5067/VJAFPLI1CSIV</a></p></li>
</ul>
</div>
</div>
  </main><aside class="col-md-3"><div class="links">
<h2 data-toc-skip>Links</h2>
<ul class="list-unstyled">
<li><a href="https://github.com/optimal2050/merra2ools/" class="external-link">Browse source code</a></li>
<li><a href="https://github.com/optimal2050/merra2ools/issues" class="external-link">Report a bug</a></li>
</ul>
</div>

<div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small>AGPL (&gt;= 3)</small></li>
</ul>
</div>

<div class="community">
<h2 data-toc-skip>Community</h2>
<ul class="list-unstyled">
<li><a href="CODE_OF_CONDUCT.html">Code of conduct</a></li>
</ul>
</div>

<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing merra2ools</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>Oleg Lugovoy <br><small class="roles"> Author, maintainer </small>   </li>
<li>Shuo Gao <br><small class="roles"> Author </small>   </li>
</ul>
</div>

<div class="dev-status">
<h2 data-toc-skip>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://lifecycle.r-lib.org/articles/stages.html#experimental" class="external-link"><img src="https://img.shields.io/badge/lifecycle-experimental-orange.svg" alt="Lifecycle: experimental"></a></li>
<li><a href="https://CRAN.R-project.org/package=merra2ools" class="external-link"><img src="https://www.r-pkg.org/badges/version/merra2ools" alt="CRAN status"></a></li>
<li><a href="code_of_conduct.html"><img src="https://img.shields.io/badge/Contributor%20Covenant-2.1-4baaaa.svg" alt="Contributor Covenant"></a></li>
</ul>
</div>

  </aside>
</div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Oleg Lugovoy, Shuo Gao.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer>
</div>





  </body>
</html>
